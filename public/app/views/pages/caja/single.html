<div id="page-wrapper">

	<div class="row">
	                <div class="col-lg-12">
	                    <h1 ng-if = "cajaCtrl.type == 'create' ">Crear registro de caja</h1>
						<h1 ng-if = "cajaCtrl.type == 'edit'">Editar registro de caja</h1>
	                </div>
	                <!-- /.col-lg-12 -->
	</div>
	<div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Agregar registro de caja
                        </div>
                        <div class="panel-body" >
                        	<div class="row">
                                
                                    <form name="menuForm" role="form"  ng-submit="cajaCtrl.saveCaja(menuForm.$valid)" novalidate>
                                        <div class="col-lg-6">
                                        <div class="form-group" ng-class="{true: 'has-error'}[cajaCtrl.submitted && menuForm.type.$error.required]">
                                            <label>Tipo de registro</label>
                                            <select name="type" ng-model="cajaCtrl.data.type" ng-init="cajaCtrl.typeCaja[0]" 
                                                ng-options="item for item in cajaCtrl.typeCaja" required>
                                            </select>
                                            <p class="help-block" ng-show="menuForm.type.$error.required && cajaCtrl.submitted" class="help-block">Seleccione un tipo de plato</p>
                                        </div>
                                        <div class="form-group" >
                                            <label>Buscar productos del men√∫</label>
                                            <input class="form-control" ng-model="cajaCtrl.search_param" ng-change="cajaCtrl.search()" placeholder="Ingrese un producto para buscar" required>                                            
                                        </div>
                                        </div>
                                        <div class="col-lg-16">
                                            <div class="simpleDemo">
                                                <div class="col-md-8">
                                                    <div ng-repeat="lists in cajaCtrl.models.lists" ng-class="col-md-12'>

                                                        <div class="panel panel-info">
                                                            <div class="panel-heading">
                                                                <h3 class="panel-title">{{lists.name}}</h3>
                                                            </div>
                                                            <div class="panel-body" >
                                                            <table id="dataTables-example" width="100%" class="table table-striped table-bordered table-hover " dnd-list="lists.list">
                                                                <thead>
                                                                <tr>
                                                                            
                                                                            <th>Nombre</th>
                                                                            <th>Tipo</th>
                                                                            <th  ng-if="lists.name == 'Productos seleccionados'">Cantidad</th>                                                                                                                        
                                                                        </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="odd gradeX" ng-repeat="item in lists.list"
                                                                        dnd-draggable="item"
                                                                        dnd-moved="lists.list.splice($index, 1)"
                                                                        dnd-effect-allowed="move"
                                                                        dnd-selected="cajaCtrl.models.selected = item"
                                                                        ng-class="{'selected': cajaCtrl.models.selected === item}"
                                                                        >
                                                                        
                                                                        <td>{{item.name}}</td>
                                                                        <td>{{item.type.name}}</td>
                                                                        <td class="center"  ng-if="lists.name == 'Productos seleccionados'"><input ng-model="item.quantity" ng-change="cajaCtrl.updateTotal(item.price,item.quantity)"></td>

                                                                       
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                                 
                                                            </div>
                                                        </div>                                                    
                                                    </div>
                                                </div>

                                                                                     
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group" ng-class="{true: 'has-error'}[cajaCtrl.submitted && menuForm.total.$error.required]">
                                                <label>Total</label>
                                                <input name="total" class="form-control" ng-model ="cajaCtrl.data.total" placeholder="Ingresar el total" required>
                                                <p class="help-block" ng-show="menuForm.total.$error.required && cajaCtrl.submitted" class="help-block">Ingrese el nombre.</p>
                                            </div>
                                       
                                     
                                        
                                        <button type="submit" class="btn btn-primary" ng-if = "cajaCtrl.type == 'create' " >
                                        	Guardar
                                        </button>
                                        <button type="submit" class="btn btn-primary" ng-if = "cajaCtrl.type == 'edit' ">
                                        	Editar
                                        </button>
                                        <a href="/menus" class="btn btn-danger">Cancelar</a>
                                        </div>
                                    </form>
                                
                            </div>                            
                        </div>
                    </div>
                </div>

    </div>
    
   
	
</div>

